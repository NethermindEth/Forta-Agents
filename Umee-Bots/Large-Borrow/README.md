# Large Borrow Bot

## Description

This bot detects transactions with large borrows in the Umee protocol.
The bot's behavior can be customized by editing the configuration fields in
`src/agent.config.ts`.

## Supported Chains

- Ethereum

## Alerts

- UMEE-6
  - Fired when a transaction contains a "large" borrow
  - Severity is always set to "unknown"
  - Type is always set to "info"
  - Metadata:
    - `amount`: Amount borrowed
    - `tvlPercentage`: % of pool TVL that was borrowed
    - `user`: Address that initiated the borrow
    - `onBehalfOf`: Address that acquired the debt

## Test Data

### Ethereum Mainnet

Uncomment the lines indicated in `src/agent.config.ts` and run:

```
npm run tx 0x70e41c3279d8014841665f480f1022569ca3fb840a387baa6b69dd8c74f49675
```

This should emit a finding for a ~43.32 DAI borrow that was ~0.0043% of the pool's TVL.

### Kovan Testnet (PoC)

The following test was generated by interacting with PoC contracts (available at the `PoC/` directory) deployed on the Kovan testnet.

In order to check the results, uncomment the lines indicated in `src/agent.config.ts`, set a Kovan testnet RPC (e.g. `https://kovan.poa.network`) as `jsonRpcUrl` in your `forta.config.json` file and run:

```
npm run tx 0xbf9f401d48d6d27a3bc075f029616dfde5587fc1d896788ced83a3fd9cedcce3,0xe2b0a75a6eeaeba7be1019dc17d6954b1b4cd0c3843859ca6a4fd8068b725d37
```

This should emit 1 finding when processing the first transaction (`MockLendingPool.test1()`) and 2 findings when processing the second transaction (`MockLendingPool.test2()`).
